<h1>#PlantLife</h1>

<h2><%= @user.first_name %>'s Greenery</h2>
<% if @user.gardens.count > 0 %>
<section class="garden-links">
  <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
    <div class="btn-group mr-2" role="group" aria-label="First group">
      <button type="button" class="btn btn-secondary">
        <%= link_to 'View Watering Schedule', schedules_path(anchor: "today") %>
      </button>
      <button type="button" class="btn btn-secondary">
        <%= button_to 'Generate Watering Schedule', schedules_path %>
      </button>
      <button type="button" class="btn btn-secondary">
        <%= button_to 'Create New Garden', new_garden_path, method: :get %>
      </button>
    </div>
    <br>
  </div>
</section>

  <% @user.gardens.each do |garden| %>
    <div id="garden-<%= garden.id %>"
      <h3><%= link_to garden.name, garden_path(garden) %></h3>
      <h3><%= garden.zip_code %></h3>
      <h3>All the plants in <%= garden.name %></h3>
      <ul>
        <% garden.plants.each do |plant| %>
          <div class="plant" id="plant-<%= plant.id %>"
            <li>
              <%= plant.name %><br />
              Watering Requirements: <%= pluralize(plant.times_per_week.round(1), 'time') %>/week<br />
              <%= button_to 'Remove Plant', plant_path(plant), method: :delete, data: {confirm: "Are you sure?"} %>
              <%= link_to 'Edit My Plant', edit_plant_path(plant) %>
            </li>
          </div>
        <% end %>
      </ul>
      <% if @facade.has_weather?(garden) %>
        <h3>Weather in <%= garden.name %>:</h3>
        <% @next_seven_days.each_with_index do |date, index| %>
          <h5 class="weather_day"><%= date %>, Chance of Rain: <%= @facade.weather(garden.lat, garden.long).chance_of_rain(index).round(0) %>%</h5>
        <% end %>
      <% end %>
    </div>
  <% end %>

<% else %>
  <h3>No Gardens Created Yet!</h3>
  <h3>Water You Waiting For?!</h3>
  <%= button_to 'Create New Garden', new_garden_path, method: :get %>
<% end %>
